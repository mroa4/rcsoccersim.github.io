# Player Command Protocol

## Connecting, reconnecting, and disconnecting

| From player to server                                                                                                              | From server to client                                                                                                                       |
| ---------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------- |
| (init *TeamName* \[(version *VerNum* )\] \[(goalie)\])*TeamName* ::= \[+-\_a-zA-Z0-9\]+*VerNum* ::= the protocol version (e.g. 15) | (init *Side* *Unum* *PlayMode*)*Side* ::= `l` \| `r`*Unum* ::= 1~11*PlayMode* ::= one of play modes(error no_more_team_or_player_or_goalie) |
| (reconnect *TeamName* *Unum*)TeamName := \[+-\_a-zA-Z0-9\]+                                                                        | (error *Side* *PlayMode*)*Side* ::= `l` \| `r`*Unum* ::= 1~11*PlayMode* ::= one of play modes(error reconnect)                              |
| (bye)                                                                                                                              |                                                                                                                                             |

If your client connects or reconnects successfully with a protocol version >= 7.0, the
server will additionally send following messages: `server_param` (a message
containing the server parameters), `player_param` (a message containing the
player parameters) and `player_type` (a message containing the player types).
Finally, the player will receive a message on changed
players (see Sec. []`sec-heterogeneousplayers`).
<!--- Correct the refrence--->
## Initial Settings

| From player to server                                                                                                                 | From server to player                                        |
| ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------ |
| (compression *Level*)*Level* ::= zlib compression level \[0,9\]or negative number                                                     | (ok compression *Level*)(warning compression_unsupported)    |
| (clang (ver *MinVer* *MaxVer*))*MinVer* ::= integer*MaxVer* ::= integer                                                               | (ok clang (ver *MinVer* *MaxVer*))                           |
| (ear (*OnOff* \[*Team*\] \[*Type*\]))*OnOff* ::= `on` \| `off`*Team* ::= `our` \| `opp` \|`left` \| `right` \|`l` \| `r` \|*TeamName* | no response if succeeded(error no team with name *TeamName*) |
| (synch_see)                                                                                                                           | (ok synch_see)                                               |
| (gaussian_see)                                                                                                                        | (ok gaussian_see)                                            |

## Player Control

| From player to server                                                                                                                                                                                                                                                                                                                                                                                         | Only once per cycle |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- |
| (turn *Moment*)*Moment* ::= **minmoment** ~ **maxmoment** degrees                                                                                                                                                                                                                                                                                                                                             | Yes                 |
| (dash *Power* \[*Direction*\])(dash (l *Power* \[*Direction*\]) (r *Power* \[*Direction*\]))(dash (r *Power* \[*Direction*\]) (l *Power* \[*Direction*\]))(dash (l *Power* \[*Direction*\]))(dash (r *Power* \[*Direction*\]))*Power* ::= **min_dash_power** ~ **max_dash_power***Direction* ::= **min_dash_angle** ~ **max_dash_angle** degreesNote: backward dash (negative power) consumes double stamina. | Yes                 |
| (kick *Power* *Direction*)*Power* ::= **minpower** ~ **maxpower***Direction* ::= **minmoment** ~ **maxmoment** degrees                                                                                                                                                                                                                                                                                        | Yes                 |
| (tackle *PowerOrAngle* \[*Foul*\])*PowerOrAngle* ::= **minmoment** ~ **maxmoment** degrees: if client version >= 12*PowerOrAngle* ::= **-max_back_tackle_power** ~ **max_tackle_power**: if client version \<  12*Foul* ::= `true` \| `false` \| `on` \| `off`                                                                                                                                                | Yes                 |
| (catch *Direction*)*Direction* ::= **minmoment** ~ **maxmoment** degrees                                                                                                                                                                                                                                                                                                                                      | Yes                 |
| (move *X* *Y*)*X* ::= real number*Y* ::= real number                                                                                                                                                                                                                                                                                                                                                          | Yes                 |
| (change_view \[*Width*\] *Quality*)*Width* ::= `narrow` \| `normal` \| `wide`*Quality* ::= `high` \| `low`                                                                                                                                                                                                                                                                                                    | No                  |
| (say "*Message*")*Message* ::= \[-0-9a-zA-Z ().+\*/?\<>\_\]\*                                                                                                                                                                                                                                                                                                                                                 | No                  |
| (pointto *Distance* *Direction*)(pointto *Off*)*Distance* ::= real number*Direction* ::= real number degree*Off* ::= `false` \| `off`                                                                                                                                                                                                                                                                         | No                  |
| (attentionto *Team* *Unum*)(attentionto *Off*)*Team* ::= `our` \| `opp` \|`left` \| `right` \|`l` \| `r` \|*TeamName**Unum* ::= integer*Off* ::= `false` \| `off`                                                                                                                                                                                                                                             | No                  |
| (done)                                                                                                                                                                                                                                                                                                                                                                                                        | Yes                 |

## Others

| From player to server | From server to player                                                                                                         |
| --------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
| (sense_body)          | sense_body message                                                                                                            |
| (score)               | (score *Time* *Our* *Opp*)*Time* ::= simulation cycle of rcssserver*Our* ::= sender's team score*Opp* ::= opponent team score |

The server may respond to the above commands with the errors:
(error unknown command) or
(error illegal command form)

# Player Sensor Protocol

The following table shows the protocol for client version 14 or later.
<!---Correct this table later--->
| From server to player                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| (hear *Time* *Sender* "*Message*")<br></br>(hear *Time* *OnlineCoach* *CoachLanguageMessage*)<br></br>*Time* ::= simulation cycle of rcssserver<br></br>*Sender* ::= `online_coach_left` \| `online_coach_right` \| `coach` \| `referee` \| `self` \| *Direction*<br></br>*Direction* ::= -180 ~ 180 degrees<br></br>*Message* ::= string<br></br>*OnlineCoach* ::= `online_coach_left` \| `online_coach_right`<br></br>*CoachLanguageMessage* ::= see the standard coach language section                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| (see *Time* *ObjInfo*+)<br></br>*Time* ::= simulation cycle of rcssserver<br></br>*ObjInfo* ::=(*ObjName* *Distance* *Direction* *DistChange* *DirChange* *BodyFacingDir* *HeadFacingDir* \[*PointDir*\] \[t\] \[k\]\])<br></br> \| (*ObjName* *Distance* *Direction* *DistChange* *DirChange* \[*PointDir*\] \[[t\|k]\])<br></br> \| (*ObjName* *Distance* *Direction* \[t\] \[k\])<br></br> \| (*ObjName* *Diretion*)<br></br>*ObjName* ::= (p \["*TeamName*" \[*UniformNumber* \[goalie\]\]\]) <br></br> \| (b) <br></br>\| (g [l\|r])<br></br> \| (f c) <br></br>\| (f [l\|c\|r] [t\|b]) <br></br>\| (f p [l\|r] [t\|c\|b]) <br></br>\| (f g [l\|r] [t\|b]) <br></br>\| (f [l\|r\|t\|b] 0) <br></br>\| (f [t\|b] [l\|r] [10\|20\|30\|40\|50]) <br></br>\| (f [l\|r] [t\|b] [10\|20\|30])<br></br>\| (l [l\|r\|t\|b] 0) <br></br> \| (P) <br></br>\| (B) <br></br>\| (G)<br></br>\| (F)<br></br>*Distance* ::= positive real number<br></br>*Direction* ::= -180 ~ 180 degrees<br></br>*DistChange* ::= real number<br></br>*DirChange* ::= real number<br></br>*BodyFacingDir* ::= -180 ~ 180 degrees<br></br>*HeadFacingDir* ::= -180 ~ 180 degrees<br></br>*PointDir* ::= -180 ~ 180 degrees<br></br>*TeamName* ::= string<br></br>*UniformNumber* ::= 1 ~ 11 |
| (sense_body *Time*<br></br>(view_mode [high\|low] [narrow\|normal\|wide])<br></br>(stamina *Stamina* *Effort* *Capacity*)<br></br>(speed *AmountOfSpeed* *DirectionOfSpeed*)<br></br>(head_angle *HeadAngle*)<br></br>(kick *KickCount*)<br></br>(dash *DashCount*)<br></br>(turn *TurnCount*)<br></br>(say *SayCount*)<br></br>(turn_neck *TurnNeckCount*)<br></br>(catch *CatchCount*)<br></br>(move *MoveCount*)<br></br>(change_view *ChangeViewCount*)<br></br>(arm (movable *MovableCycles*) <br></br>(expires *ExpireCycles*)<br></br> (count *PointtoCount*))<br></br>(focus (target [none\|[l\|r] *Unum*]) (count *AttentiontoCount*))<br></br>(tackle (expires *ExpireCycles*) (count *TackleCount*))<br></br>(collision [none\|\[(ball)\] \[(player)\] \[(post)\]])<br></br>(foul (charged *FoulCycles*) (card [red\|yellow\|none])))                                                                                                                                                                                                                                                                                                         |
| (fullstate *Time*<br></br>(pmode [goalie_catch_ball\_[l\|r]\|\*PlayMode\*])<br></br>(vmode [high\|low] [narrow\|normal\|wide])<br></br>(count *KickCount* *DashCount* *TurnCount* *CatchCount* *MoveCount* *TurnNeckCount* *ChangeViewCount* *SayCount*)<br></br>(arm (movable *MovableCycles*) (expires *ExpireCycles*)) (target *Distance* *Direction*) (count *PointtoCount*)<br></br>(score *Time* *Our* *Opp*)<br></br>((b) *X* *Y* *VelX* *VelY*)<br></br>*Players*+)<br></br>  *Players* ::= ((p [l\|r] *UniformNumber* \[g\] *PlayerType*) *X* *Y* *VelX* *VelY* *BodyDir* *NeckDir* \[*PointtoDist* *PointtoDir*\] (stamina *Stamina* *Effort* *Recovery* *Capacity*) \[k\|t\|f\] \[r\|y\]))                                                                                                                                                                                                                                                                                                                                                   |
